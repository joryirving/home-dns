services:
  traefik:
    image: docker.io/library/traefik:v3.0.1@sha256:9ad110e745f68e15c09a4d6ccc0dc3cd674ab21466c0884b8e7823a445ac4d25
    container_name: traefik
    network_mode: bridge
    env_file:
      ./data/config/config.sops.env
    ports:
      - '80:80'
      - '8080:8080'
      - '443:443'
    volumes:
      - ./data/cache:/data
      - ./data/config/traefik.yaml:/etc/traefik/traefik.yaml:ro
      - /var/run/docker.sock:/var/run/docker.sock:ro
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
