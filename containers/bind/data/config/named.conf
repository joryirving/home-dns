acl internal {
    192.168.1.0/24  #LAN
    192.168.6.0/24  #Guest
    192.168.10.0/24 #Camera
    192.168.20.0/24 #IoT
    192.168.30.0/24 #Trusted
    10.69.1.0/24    #Servers
};

options {
    listen-on port 5300 { 127.0.0.1; 192.168.1.2; };
    directory "/var/cache/bind";
    allow-recursion {
        internal;
    };
    allow-transfer {
        none;
    };
    allow-update {
        none;
    };
};

statistics-channels {
  inet 192.168.1.2 port 8080 allow { internal; };
};

include "/etc/bind/rndc.key";
include "/etc/bind/kubernetes-main.key";
include "/etc/bind/kubernetes-pi.key";

controls {
    inet 0.0.0.0 allow {
        localhost;
    } keys {
        "rndc-key";
    };
};

zone "jory.dev." {
    type master;
    file "/etc/bind/zones/jory.dev.zone";
    journal "/var/cache/bind/jory.dev.zone.jnl";
    allow-transfer {
        key "kubernetes-main-key";
    };
    update-policy {
        grant kubernetes-main-key zonesub ANY;
    };
};

zone "j8g.dev." {
    type master;
    file "/etc/bind/zones/j8g.dev.zone";
    journal "/var/cache/bind/j8g.dev.zone.jnl";
    allow-transfer {
        key "kubernetes-pi-key";
    };
    update-policy {
        grant kubernetes-pi-key zonesub ANY;
    };
};

zone "jory.casa." {
    type master;
    file "/etc/bind/zones/jory.casa.zone";
    journal "/var/cache/bind/jory.casa.zone.jnl";
};

zone "168.192.in-addr.arpa." {
    type master;
    file "/etc/bind/zones/168.192.in-addr.arpa.zone";
    journal "/var/cache/bind/168.192.in-addr.arpa.jnl";
};
